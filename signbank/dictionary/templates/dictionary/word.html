
{% extends "baselayout.html" %}

{% block pagetitle %}{{ settings_site_title }} - Sign for {{ translation.translation }} {% endblock %}


{% block jqueryready %}


{% endblock %}

{% block script %}
    function replay() {
        $f('player').play();
    }
{% endblock %}




{% block content %}
<div id='publicsign' class="view-{{ viewname }}">
    {% if feedbackmessage %}
    <div id="feedbackmessage">
        <p class='alert alert-info'>
            {{ feedbackmessage }}
        <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button></p>
    </div>
    {% endif %}

    <div id="signinfo" class='navbar navbar-default navbar-collapse'>
    
        <div class='btn-group'>
            {% if SIGN_NAVIGATION %}
        
                {% if navigation.prev %}
                <a class='btn navbar-btn btn-default' href="{% url 'root_page' %}dictionary/gloss/{{navigation.prev.idgloss}}.html?lastmatch={{lastmatch}}">&laquo; <span class='hidden-xs'>Previous Sign</span></a>
           
                {% endif %}
            
                <button class='btn navbar-btn'>Sign {{glossposn}} of {{glosscount}} <span class='hidden-xs'>in the Auslan Dictionary</span></button>
            
                {% if navigation.next %}
                <a class="btn navbar-btn btn-default"
                   href="{% url 'root_page' %}dictionary/gloss/{{navigation.next.idgloss}}.html?lastmatch={{lastmatch}}"><span class='hidden-xs'>Next Sign</span> &raquo;</a>
                {% endif %}
             {% else %}
           
             {% endif %}
        </div>
   
   
        <div class='pull-right'>
            {% if viewname == "words" or viewname == "regional" %}
            <span class='navbar-text'>Matches for the word <em>{{ translation.translation }}</em></span>
            <div class='btn-group'>
            {% for i in matches %}
                {% ifequal i n %}
                <button type='button' class='btn btn-primary navbar-btn'>{{i}}</button>
                {% else %}
                <a type='button' class='btn btn-default navbar-btn' href="{{translation.translation}}-{{i}}.html">{{i}}</a>
                {% endifequal %}
            {% endfor %}
            </div>
            {% else %}
                {% if lastmatch %}
                <a class='btn btn-default navbar-btn' href="{% url 'root_page' %}dictionary/words/{{lastmatch}}.html">Return to Matches</a>
                {% endif %}
            {% endif %}
        </div>
    
    
        <div class='btn-group'>
           {% if perms.dictionary.search_gloss %}
           <a id='editbutton' class='btn btn-default navbar-btn' href="{% url 'dictionary:admin_gloss_view' pk=gloss.id %}">Detail View</a>
           {% endif %}
           {% if viewname == "words" and gloss.region_set.count > 0 %}
           <a id='regionalbutton' class='btn btn-default navbar-btn' href="{% url 'dictionary:regional_view' keyword=translation.translation n=n %}">Regional View</a>
           {% elif viewname == "regional" %}
           <a id='regionalbutton' class='btn btn-default navbar-btn' href="{% url 'dictionary:word_view' keyword=translation.translation n=n %}">Main View</a>
           {% endif %}
        </div>
    
    </div>

    <div id="definitionblock">
        <div class='col-md-4 region-left'>
            <div id="videocontainer">
               <div id="player">
                  <iframe id='videoiframe' scrolling="no" frameborder='0' allowfullscreen="allowfullscreen"
                          src="{% url 'signbank.video.views.iframe' gloss.pk %}">
                  </iframe>
               </div>
               <div id="replay"></div>
            </div>
        
        
            <div id="keywords">
                 <p><strong>Keywords:</strong>
                 {% for kwd in allkwds %}
                   {% ifequal translation.translation kwd.translation %}<b>{{ kwd.translation }}</b>{% else %}{{ kwd.translation }}{% endifequal %}{% if not forloop.last %},{% endif %}
                 {% endfor %}
                 </p>
            </div>

            {% if viewname == "words" %}
            <div id="feedback">
                <ul>
                    {% ifequal viewname "words" %}
                    <li><a href="{% url 'root_page' %}feedback/sign/{{translation.translation}}-{{n}}.html?return=/dictionary/words/{{translation.translation}}-{{n}}.html">Provide feedback about this sign</a></li>
                    {% else %}
                    <li><a href="{% url 'root_page' %}feedback/gloss/{{gloss.idgloss}}.html?return=/dictionary/gloss/{{gloss.idgloss}}.html&lastmatch={{lastmatch}}">Provide feedback about this sign</a></li>
                    {% endifequal %}

                    <li><a href="{% url 'root_page' %}feedback/missingsign.html">Report a missing sign</a></li>
                    <li><a href="{% url 'root_page' %}feedback/generalfeedback.html">Provide general site feedback</a></li>
                </ul>
            </div>
            {% endif %}
        </div>

        <div class='col-md-3 region-right'>
            {% if viewname == "regional" %}
            {% if regions|length > 0 %}
            <div id="states">
                <div>
                {% for image in dialect_image %}
                    <img src="{{ STATIC_URL }}{{image}}" alt="Region">
                {% endfor %}
                </div>
            </div>

            <div>
                <h4>Sign Distribution</h4>
                <ul>
                  {% for region in regions %}
                    <li>{{ region.dialect.name }}{{ region.traditional|yesno:" (traditional)," }} - {{ region.frequency }}</li>
                  {% endfor %}
                </ul> 
            </div>
            {% endif %}
            {% endif %}
        </div>

        {% if viewname == "regional" %}
        <div  class='col-md-8'>
          <h2>Template and other signs in the series</h2>
          <p>Here they go</p>
        </div>
        {% endif %}

        {% if DEFINITION_FIELDS and gloss.published_definitions %}
        <div  class='col-md-8'>
            <h2>Sign Definition</h2>

            {% for deftype in DEFINITION_FIELDS %}
        
                 {% regroup gloss.published_definitions by role as roles %}
        
                 {% for role in roles %}
              
                      {% ifequal deftype role.grouper %}  
                  
                          <h3>{{role.list.0.get_role_display}}</h3>
                  
                          <ol>
                          {% for def in role.list %}     
                            <li>{{def.text}}</li>
                          {% endfor %}
                          </ol>
                  
                      {% endifequal %}
                 {% endfor %}
            {% endfor %}
        
        </div>
        {% endif %}
    
    </div>

</div>

{% endblock %}

