{% extends "simple.html" %}

{% block pagetitle %}Auslan Update Video for Gloss{% endblock %}

{% block jqueryready %}
    config1 = {
        plugins: { 
                controls: null 
        },
        play: { opacity: 0 },
        clip: {
            url: '{% auslan_media_prefix %}{{ gloss.get_video_url }}',
            autoplay: true
        },
        onBeforeFullscreen: function() {return false;}
    };
    config2 = {
        plugins: { 
                controls: null 
        },
        play: { opacity: 0 },
        clip: {
            url: '{% auslan_media_prefix %}{{ videofile }}',
            autoplay: true
        },
        onBeforeFullscreen: function() {return false;}
    };
    flowplayer("player1", "{% auslan_static_prefix %}flowplayer/flowplayer-3.1.5.swf", config1);
    flowplayer("player2", "{% auslan_static_prefix %}flowplayer/flowplayer-3.1.5.swf", config2);
  
    
{% endblock %}

{% block content %}
<div style='margin-left: auto; margin-right: auto; text-align: center;'>
<h2>Update Video for Gloss <em>{{gloss.idgloss}}</em></h2>

{% ifequal status "cancelled" %}
<p>Replacement of video cancelled.</p>

<p><a href="javascript:window.close()">Close Window</a></p>

{% else %}
    {% ifequal status "completed" %}
    <p>Replacement of video completed.</p>
    
    <p><a href="javascript:window.close()">Close Window</a></p>
    {% endifequal %}
{% endifequal %}

{% ifequal status "form" %}
{% if videofile %}
<table style='margin-left: auto; margin-right; auto;'>
<thead>
  <tr><th>Existing Video</th><th>New Video</th></tr>
</thead>
<tbody>
  <tr>
    <td><div id="player1"></div></td>
    <td><div id="player2"></div></td>        
  </tr>
  
  <tr>
    <td colspan="2">
    <form method="POST">
    <input type="hidden" name="confirmvideofile" value="{{videofile}}"/> 
    Confirm update of this video:
    <input type="submit" value="Confirm"/> 
    <button name="Cancel" value="cancel">Cancel</button>
    </form>
    </td>
  </tr>
    
  </tbody>
</table>

{% else %}

<form method="POST" enctype="multipart/form-data">
 <ul>
  {{form.as_ul}}
 </ul>
 <p><input type='submit' value='Upload Video'/></p>
</form>

<p>When you upload a video it will first be converted to
the Flash video format used on the site. you will get a 
chance to preview the video before any permanent change
is made to the site.</p>

{% endif %}
{% endifequal %}

</div>
{% endblock %}
